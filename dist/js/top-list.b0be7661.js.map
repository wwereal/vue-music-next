{"version":3,"sources":["webpack:///./src/views/top-list.vue","webpack:///./src/views/top-list.vue?aebf","webpack:///./src/components/wrap-scroll/index.js","webpack:///./src/views/top-list.vue?0f7a","webpack:///./src/service/top-list.js"],"names":["class","width","height","topList","item","key","id","selectItem","pic","songList","song","index","songName","singerName","Component","appear","name","data","selectedTop","loading","components","Scroll","created","result","methods","top","this","cacheTop","$router","push","path","session","set","render","__scopeId","props","emits","ctx","h","mergeProps","ref","$props","onScroll","e","$emit","default","withCtx","renderSlot","$slots","setup","scrollRef","scroll","computed","value","store","useStore","playlist","state","watch","nextTick","refresh","getTopList","get","getTopDetail","period"],"mappings":"yOACOA,MAAM,Y,GASEA,MAAM,Q,GAEPC,MAAM,MACNC,OAAO,O,GAIPF,MAAM,a,4MAhBlB,eAiCM,MAjCN,EAiCM,CAhCJ,eA0BS,GA1BDA,MAAM,oBAAkB,C,WAC9B,iBAwBK,CAxBL,eAwBK,Y,mBAvBH,eAsBK,2BApBY,EAAAG,SAAO,SAAfC,G,wBAFT,eAsBK,MArBHJ,MAAM,OAELK,IAAKD,EAAKE,GACV,QAAK,mBAAE,EAAAC,WAAWH,K,CAEnB,eAMM,MANN,EAMM,C,eALJ,eAIE,MAJF,EAIE,W,GADQA,EAAKI,SAGjB,eAQK,KARL,EAQK,E,mBAPH,eAMK,2BAJqBJ,EAAKK,UAAQ,SAA7BC,EAAMC,G,wBAFhB,eAMK,MALHX,MAAM,OAELK,IAAKK,EAAKJ,I,CACX,eAA4B,2BAApBK,EAAQ,GAAG,KAAE,GACrB,eAAkD,2BAA1CD,EAAKE,UAAU,IAAC,eAAEF,EAAKG,YAAU,Q,6CAMnD,eAIc,Q,WAHZ,gBADqBC,EACrB,EADqBA,UACrB,MAD8B,CAC9B,eAEa,QAFDC,OAAA,GAAOC,KAAK,S,YACtB,iBAAgD,E,iBAAhD,eAAgD,eAAhCF,GAAS,CAAGG,KAAM,EAAAC,aAAW,sB,gCA9BlB,EAAAC,c,wEA0ClB,GACbH,KAAM,WACNI,WAAY,CACVC,OAAA,QAEFJ,KALa,WAMX,MAAO,CACLd,QAAS,GACTgB,SAAS,EACTD,YAAa,OAGXI,QAZO,WAYG,8KACO,iBADP,OACRC,EADQ,OAEd,EAAKpB,QAAUoB,EAAOpB,QACtB,EAAKgB,SAAU,EAHD,8CAKhBK,QAAS,CACPjB,WADO,SACIkB,GACTC,KAAKR,YAAcO,EACnBC,KAAKC,SAASF,GACdC,KAAKE,QAAQC,KAAK,CAChBC,KAAM,aAAF,OAAeL,EAAInB,OAG3BqB,SARO,SAQEF,GACP,OAAQM,QAAQC,IAAI,OAASP,M,UChErC,EAAOQ,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB,kGCJA,QACblB,KAAM,cACNmB,MAAOd,OAAOc,MACdC,MAAOf,OAAOe,MACdH,OAJa,SAINI,GACL,OAAOC,eAAEjB,OAAQkB,eAAW,CAC1BC,IAAK,aACJH,EAAII,OAAQ,CACbC,SAAU,SAACC,GACTN,EAAIO,MAAM,SAAUD,MAEpB,CACFE,QAASC,gBAAQ,WACf,MAAO,CAACC,eAAWV,EAAIW,OAAQ,kBAIrCC,MAjBa,WAkBX,IAAMC,EAAYV,eAAI,MAChBW,EAASC,gBAAS,WACtB,OAAOF,EAAUG,MAAMF,UAGnBG,EAAQC,iBACRC,EAAWJ,gBAAS,kBAAME,EAAMG,MAAMD,YAO5C,OALAE,eAAMF,EAAD,wCAAW,8GACRG,iBADQ,OAEdR,EAAOE,MAAMO,UAFC,4CAKT,CACLV,YACAC,a,oCCrCN,W,kCCAA,oFAEO,SAASU,IACd,OAAOC,eAAI,mBAGN,SAASC,EAAatC,GAC3B,OAAOqC,eAAI,oBAAqB,CAC9BxD,GAAImB,EAAInB,GACR0D,OAAQvC,EAAIuC","file":"js/top-list.b0be7661.js","sourcesContent":["<template>\n  <div class=\"top-list\" v-loading=\"loading\">\n    <scroll class=\"top-list-content\">\n      <ul>\n        <li\n          class=\"item\"\n          v-for=\"item in topList\"\n          :key=\"item.id\"\n          @click=\"selectItem(item)\"\n        >\n          <div class=\"icon\">\n            <img\n              width=\"100\"\n              height=\"100\"\n              v-lazy=\"item.pic\"\n            />\n          </div>\n          <ul class=\"song-list\">\n            <li\n              class=\"song\"\n              v-for=\"(song, index) in item.songList\"\n              :key=\"song.id\">\n              <span>{{index + 1}}. </span>\n              <span>{{song.songName}}-{{song.singerName}}</span>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </scroll>\n    <router-view v-slot=\"{ Component }\">\n      <transition appear name=\"slide\">\n        <component :is=\"Component\" :data=\"selectedTop\"/>\n      </transition>\n    </router-view>\n  </div>\n</template>\n\n<script>\n  import Scroll from '@/components/wrap-scroll'\n  import { getTopList } from '@/service/top-list'\n  import { TOP_KEY } from '@/assets/js/constant'\n  import storage from 'good-storage'\n\n  export default {\n    name: 'top-list',\n    components: {\n      Scroll\n    },\n    data() {\n      return {\n        topList: [],\n        loading: true,\n        selectedTop: null\n      }\n    },\n    async created() {\n      const result = await getTopList()\n      this.topList = result.topList\n      this.loading = false\n    },\n    methods: {\n      selectItem(top) {\n        this.selectedTop = top\n        this.cacheTop(top)\n        this.$router.push({\n          path: `/top-list/${top.id}`\n        })\n      },\n      cacheTop(top) {\n        storage.session.set(TOP_KEY, top)\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  .top-list {\n    position: fixed;\n    width: 100%;\n    top: 88px;\n    bottom: 0;\n    .top-list-content {\n      height: 100%;\n      overflow: hidden;\n      .item {\n        display: flex;\n        margin: 0 20px;\n        padding-top: 20px;\n        height: 100px;\n        &:last-child {\n          padding-bottom: 20px;\n        }\n        .icon {\n          flex: 0 0 100px;\n          width: 100px;\n          height: 100px;\n        }\n        .song-list {\n          flex: 1;\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          padding: 0 20px;\n          height: 100px;\n          overflow: hidden;\n          background: $color-highlight-background;\n          color: $color-text-d;\n          font-size: $font-size-small;\n          .song {\n            @include no-wrap();\n            line-height: 26px;\n          }\n        }\n      }\n    }\n  }\n</style>\n","import { render } from \"./top-list.vue?vue&type=template&id=5ae2adee&scoped=true\"\nimport script from \"./top-list.vue?vue&type=script&lang=js\"\nexport * from \"./top-list.vue?vue&type=script&lang=js\"\n\nimport \"./top-list.vue?vue&type=style&index=0&id=5ae2adee&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-5ae2adee\"\n\nexport default script","import { h, mergeProps, withCtx, renderSlot, ref, computed, watch, nextTick } from 'vue'\nimport Scroll from '@/components/base/scroll/scroll'\nimport { useStore } from 'vuex'\n\nexport default {\n  name: 'wrap-scroll',\n  props: Scroll.props,\n  emits: Scroll.emits,\n  render(ctx) {\n    return h(Scroll, mergeProps({\n      ref: 'scrollRef'\n    }, ctx.$props, {\n      onScroll: (e) => {\n        ctx.$emit('scroll', e)\n      }\n    }), {\n      default: withCtx(() => {\n        return [renderSlot(ctx.$slots, 'default')]\n      })\n    })\n  },\n  setup() {\n    const scrollRef = ref(null)\n    const scroll = computed(() => {\n      return scrollRef.value.scroll\n    })\n\n    const store = useStore()\n    const playlist = computed(() => store.state.playlist)\n\n    watch(playlist, async () => {\n      await nextTick()\n      scroll.value.refresh()\n    })\n\n    return {\n      scrollRef,\n      scroll\n    }\n  }\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./top-list.vue?vue&type=style&index=0&id=5ae2adee&lang=scss&scoped=true\"","import { get } from './base'\n\nexport function getTopList() {\n  return get('/api/getTopList')\n}\n\nexport function getTopDetail(top) {\n  return get('/api/getTopDetail', {\n    id: top.id,\n    period: top.period\n  })\n}\n"],"sourceRoot":""}