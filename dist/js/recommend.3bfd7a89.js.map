{"version":3,"sources":["webpack:///./src/components/base/slider/slider.vue?5453","webpack:///./src/components/wrap-scroll/index.js","webpack:///./src/views/recommend.vue","webpack:///./src/components/base/slider/slider.vue","webpack:///./src/components/base/slider/use-slider.js","webpack:///./src/components/base/slider/slider.vue?3e90","webpack:///./src/views/recommend.vue?7a3d","webpack:///./node_modules/core-js/internals/create-html.js","webpack:///./node_modules/core-js/modules/es.string.link.js","webpack:///./node_modules/core-js/internals/string-html-forced.js","webpack:///./src/views/recommend.vue?3312","webpack:///./src/service/recommend.js"],"names":["name","props","Scroll","emits","render","ctx","h","mergeProps","ref","$props","onScroll","e","$emit","default","withCtx","renderSlot","$slots","setup","scrollRef","scroll","computed","value","store","useStore","playlist","state","watch","nextTick","refresh","class","width","height","sliders","length","loading","albums","item","key","id","selectItem","pic","username","title","Component","appear","data","selectedAlbum","href","link","src","index","currentPageIndex","useSlider","wrapperRef","slider","onMounted","sliderVal","BScroll","click","scrollX","scrollY","momentum","bounce","probeType","slide","on","page","pageX","onUnmounted","destroy","onActivated","enable","onDeactivated","disable","use","Slide","type","Array","rootRef","__scopeId","components","Slider","this","created","result","methods","album","cacheAlbum","$router","push","path","session","set","requireObjectCoercible","quot","module","exports","string","tag","attribute","S","String","p1","replace","$","createHTML","forcedStringHTMLMethod","target","proto","forced","url","fails","METHOD_NAME","test","toLowerCase","split","getRecommend","get","getAlbum"],"mappings":"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","file":"js/recommend.3bfd7a89.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./slider.vue?vue&type=style&index=0&id=29bd3a08&lang=scss&scoped=true\"","import { h, mergeProps, withCtx, renderSlot, ref, computed, watch, nextTick } from 'vue'\nimport Scroll from '@/components/base/scroll/scroll'\nimport { useStore } from 'vuex'\n\nexport default {\n  name: 'wrap-scroll',\n  props: Scroll.props,\n  emits: Scroll.emits,\n  render(ctx) {\n    return h(Scroll, mergeProps({\n      ref: 'scrollRef'\n    }, ctx.$props, {\n      onScroll: (e) => {\n        ctx.$emit('scroll', e)\n      }\n    }), {\n      default: withCtx(() => {\n        return [renderSlot(ctx.$slots, 'default')]\n      })\n    })\n  },\n  setup() {\n    const scrollRef = ref(null)\n    const scroll = computed(() => {\n      return scrollRef.value.scroll\n    })\n\n    const store = useStore()\n    const playlist = computed(() => store.state.playlist)\n\n    watch(playlist, async () => {\n      await nextTick()\n      scroll.value.refresh()\n    })\n\n    return {\n      scrollRef,\n      scroll\n    }\n  }\n}\n","<template>\n  <div class=\"recommend\" v-loading=\"loading\">\n    <scroll class=\"recommend-content\">\n      <div>\n        <div class=\"slider-wrapper\">\n          <div class=\"slider-content\">\n            <slider v-if=\"sliders.length\" :sliders=\"sliders\"></slider>\n          </div>\n        </div>\n        <div class=\"recommend-list\">\n          <h1 class=\"list-title\" v-show=\"!loading\">热门歌单推荐</h1>\n          <ul>\n            <li\n              v-for=\"item in albums\"\n              class=\"item\"\n              :key=\"item.id\"\n              @click=\"selectItem(item)\"\n            >\n              <div class=\"icon\">\n                <img width=\"60\" height=\"60\" v-lazy=\"item.pic\">\n              </div>\n              <div class=\"text\">\n                <h2 class=\"name\">\n                  {{ item.username }}\n                </h2>\n                <p class=\"title\">\n                  {{item.title}}\n                </p>\n              </div>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </scroll>\n    <router-view v-slot=\"{ Component }\">\n      <transition appear name=\"slide\">\n        <component :is=\"Component\" :data=\"selectedAlbum\"/>\n      </transition>\n    </router-view>\n  </div>\n</template>\n\n<script>\n  import { getRecommend } from '@/service/recommend'\n  import Slider from '@/components/base/slider/slider'\n  import Scroll from '@/components/wrap-scroll'\n  import storage from 'good-storage'\n  import { ALBUM_KEY } from '@/assets/js/constant'\n\n  export default {\n    name: 'recommend',\n    components: {\n      Slider,\n      Scroll\n    },\n    data() {\n      return {\n        sliders: [],\n        albums: [],\n        selectedAlbum: null\n      }\n    },\n    computed: {\n      loading() {\n        return !this.sliders.length && !this.albums.length\n      }\n    },\n    async created() {\n      const result = await getRecommend()\n      this.sliders = result.sliders\n      this.albums = result.albums\n    },\n    methods: {\n      selectItem(album) {\n        this.selectedAlbum = album\n        this.cacheAlbum(album)\n        this.$router.push({\n          path: `/recommend/${album.id}`\n        })\n      },\n      cacheAlbum(album) {\n        storage.session.set(ALBUM_KEY, album)\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  .recommend {\n    position: fixed;\n    width: 100%;\n    top: 88px;\n    bottom: 0;\n    overflow: scroll;\n    .recommend-content {\n      height: 100%;\n      overflow: hidden;\n      .slider-wrapper {\n        position: relative;\n        width: 100%;\n        height: 0;\n        padding-top: 40%;\n        overflow: hidden;\n        .slider-content {\n          position: absolute;\n          left: 0;\n          top: 0;\n          width: 100%;\n          height: 100%;\n        }\n      }\n      .recommend-list {\n        .list-title {\n          height: 65px;\n          line-height: 65px;\n          text-align: center;\n          font-size: $font-size-medium;\n          color: $color-theme;\n        }\n        .item {\n          display: flex;\n          box-sizing: border-box;\n          align-items: center;\n          padding: 0 20px 20px 20px;\n\n          .icon {\n            flex: 0 0 60px;\n            width: 60px;\n            padding-right: 20px;\n          }\n          .text {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            flex: 1;\n            line-height: 20px;\n            overflow: hidden;\n            font-size: $font-size-medium;\n          }\n          .name {\n            margin-bottom: 10px;\n            color: $color-text;\n          }\n          .title {\n            color: $color-text-d;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"slider\" ref=\"rootRef\">\n    <div class=\"slider-group\">\n      <div\n        class=\"slider-page\"\n        v-for=\"item in sliders\"\n        :key=\"item.id\"\n      >\n        <a :href=\"item.link\">\n          <img :src=\"item.pic\"/>\n        </a>\n      </div>\n    </div>\n    <div class=\"dots-wrapper\">\n      <span\n        class=\"dot\"\n        v-for=\"(item, index) in sliders\"\n        :key=\"item.id\"\n        :class=\"{'active': currentPageIndex === index}\">\n      </span>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { ref } from 'vue'\n  import useSlider from './use-slider'\n\n  export default {\n    name: 'slider',\n    props: {\n      sliders: {\n        type: Array,\n        default() {\n          return []\n        }\n      }\n    },\n    setup() {\n      const rootRef = ref(null)\n      const { currentPageIndex } = useSlider(rootRef)\n\n      return {\n        rootRef,\n        currentPageIndex\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  .slider {\n    min-height: 1px;\n    font-size: 0;\n    touch-action: pan-y;\n    .slider-group {\n      position: relative;\n      overflow: hidden;\n      white-space: nowrap;\n      .slider-page {\n        display: inline-block;\n        transform: translate3d(0, 0, 0);\n        backface-visibility: hidden;\n        a {\n          display: block;\n          width: 100%;\n        }\n        img {\n          display: block;\n          width: 100%;\n        }\n      }\n    }\n    .dots-wrapper {\n      position: absolute;\n      left: 50%;\n      bottom: 12px;\n      line-height: 12px;\n      transform: translateX(-50%);\n      .dot {\n        display: inline-block;\n        margin: 0 4px;\n        width: 8px;\n        height: 8px;\n        border-radius: 50%;\n        background: $color-text-l;\n        &.active {\n          width: 20px;\n          border-radius: 5px;\n          background: $color-text-ll;\n        }\n      }\n    }\n  }\n</style>\n","import BScroll from '@better-scroll/core'\nimport Slide from '@better-scroll/slide'\n\nimport { onMounted, onUnmounted, onActivated, onDeactivated, ref } from 'vue'\n\nBScroll.use(Slide)\n\nexport default function useSlider(wrapperRef) {\n  const slider = ref(null)\n  const currentPageIndex = ref(0)\n\n  onMounted(() => {\n    const sliderVal = slider.value = new BScroll(wrapperRef.value, {\n      click: true,\n      scrollX: true,\n      scrollY: false,\n      momentum: false,\n      bounce: false,\n      probeType: 2,\n      slide: true\n    })\n\n    sliderVal.on('slideWillChange', (page) => {\n      currentPageIndex.value = page.pageX\n    })\n  })\n\n  onUnmounted(() => {\n    slider.value.destroy()\n  })\n\n  onActivated(() => {\n    slider.value.enable()\n    slider.value.refresh()\n  })\n\n  onDeactivated(() => {\n    slider.value.disable()\n  })\n\n  return {\n    slider,\n    currentPageIndex\n  }\n}\n","import { render } from \"./slider.vue?vue&type=template&id=29bd3a08&scoped=true\"\nimport script from \"./slider.vue?vue&type=script&lang=js\"\nexport * from \"./slider.vue?vue&type=script&lang=js\"\n\nimport \"./slider.vue?vue&type=style&index=0&id=29bd3a08&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-29bd3a08\"\n\nexport default script","import { render } from \"./recommend.vue?vue&type=template&id=fb70edf4&scoped=true\"\nimport script from \"./recommend.vue?vue&type=script&lang=js\"\nexport * from \"./recommend.vue?vue&type=script&lang=js\"\n\nimport \"./recommend.vue?vue&type=style&index=0&id=fb70edf4&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-fb70edf4\"\n\nexport default script","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar quot = /\"/g;\n\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\n// https://tc39.github.io/ecma262/#sec-createhtml\nmodule.exports = function (string, tag, attribute, value) {\n  var S = String(requireObjectCoercible(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.link` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.link\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('link') }, {\n  link: function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  }\n});\n","var fails = require('../internals/fails');\n\n// check the existence of a method, lowercase\n// of a tag and escaping quotes in arguments\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    var test = ''[METHOD_NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  });\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./recommend.vue?vue&type=style&index=0&id=fb70edf4&lang=scss&scoped=true\"","import { get } from './base'\n\nexport function getRecommend() {\n  return get('/api/getRecommend')\n}\n\nexport function getAlbum(album) {\n  return get('/api/getAlbum', {\n    id: album.id\n  })\n}\n"],"sourceRoot":""}