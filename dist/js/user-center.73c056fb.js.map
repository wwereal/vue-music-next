{"version":3,"sources":["webpack:///./src/views/user-center.vue?2b8e","webpack:///./src/views/user-center.vue","webpack:///./src/views/user-center.vue?ed75","webpack:///./src/components/wrap-scroll/index.js"],"names":["class","back","items","currentIndex","currentList","length","random","songs","favoriteList","selectSong","playHistory","noResult","name","components","Switches","Scroll","SongList","data","computed","this","noResultText","methods","$router","song","addSong","randomPlay","render","__scopeId","props","emits","ctx","h","mergeProps","ref","$props","onScroll","e","$emit","default","withCtx","renderSlot","$slots","setup","scrollRef","scroll","value","store","useStore","playlist","state","watch","nextTick","refresh"],"mappings":"6GAAA,W,wICEIA,MAAM,e,EAIJ,eAAyB,KAAtBA,MAAM,aAAW,S,GAEjBA,MAAM,oB,EAWT,eAAyB,KAAtBA,MAAM,aAAW,S,EACpB,eAAgC,QAA1BA,MAAM,QAAO,UAAM,G,GAEtBA,MAAM,gB,GAEFA,MAAM,c,GASNA,MAAM,c,gNAhCjB,eAyCM,MAzCN,EAyCM,CArCJ,eAEM,OAFDA,MAAM,OAAQ,QAAK,8BAAE,EAAAC,MAAA,EAAAA,KAAA,sB,CACxB,IAEF,eAKM,MALN,EAKM,CAJJ,eAGY,GAFTC,MAAO,CAAC,OAAQ,Q,WACR,EAAAC,a,qDAAA,EAAAA,aAAY,K,yBAKjB,EAAAC,YAAYC,Q,iBAFpB,eAOM,O,MANJL,MAAM,WAEL,QAAK,8BAAE,EAAAM,QAAA,EAAAA,OAAA,sB,CAER,EACA,K,sBAEF,eAmBM,MAnBN,EAmBM,CAlB0C,IAAZ,EAAAH,c,iBAAlC,eAQS,G,MARDH,MAAM,e,YACZ,iBAMM,CANN,eAMM,MANN,EAMM,CALJ,eAIY,GAHTO,MAAO,EAAAC,aACP,SAAQ,EAAAC,Y,gEAK+B,IAAZ,EAAAN,c,iBAAlC,eAQS,G,MARDH,MAAM,e,YACZ,iBAMM,CANN,eAMM,MANN,EAMM,CALJ,eAIY,GAHTO,MAAO,EAAAG,YACP,SAAQ,EAAAD,Y,6EAjCW,EAAAE,SAAhB,qB,4DAgDC,GACbC,KAAM,cACNC,WAAY,CACVC,SAAA,OACAC,OAAA,OACAC,SAAA,QAEFC,KAPa,WAQX,MAAO,CACLd,aAAc,IAGlBe,SAAU,gBACRP,SADQ,WAEN,OAA6B,IAAtBQ,KAAKhB,cAAsBgB,KAAKX,aAAaH,QAAUc,KAAKT,YAAYL,QAEjFe,aAJQ,WAKN,OAA6B,IAAtBD,KAAKhB,aAAqB,SAAW,YAE9CC,YAPQ,WAQN,OAA6B,IAAtBe,KAAKhB,aAAqBgB,KAAKX,aAAeW,KAAKT,cAEzD,eAAS,CACV,eACA,iBAGJW,QAAS,gBACPpB,KADO,WAELkB,KAAKG,QAAQrB,QAEfQ,WAJO,SAAF,GAIgB,IAARc,EAAQ,EAARA,KACXJ,KAAKK,QAAQD,IAEfjB,OAPO,WAQLa,KAAKM,WAAWN,KAAKf,eAEpB,eAAW,CACZ,UACA,iB,UCrFR,EAAOsB,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB,kGCJA,QACbf,KAAM,cACNgB,MAAOb,OAAOa,MACdC,MAAOd,OAAOc,MACdH,OAJa,SAINI,GACL,OAAOC,eAAEhB,OAAQiB,eAAW,CAC1BC,IAAK,aACJH,EAAII,OAAQ,CACbC,SAAU,SAACC,GACTN,EAAIO,MAAM,SAAUD,MAEpB,CACFE,QAASC,gBAAQ,WACf,MAAO,CAACC,eAAWV,EAAIW,OAAQ,kBAIrCC,MAjBa,WAkBX,IAAMC,EAAYV,eAAI,MAChBW,EAAS1B,gBAAS,WACtB,OAAOyB,EAAUE,MAAMD,UAGnBE,EAAQC,iBACRC,EAAW9B,gBAAS,kBAAM4B,EAAMG,MAAMD,YAO5C,OALAE,eAAMF,EAAD,wCAAW,8GACRG,iBADQ,OAEdP,EAAOC,MAAMO,UAFC,4CAKT,CACLT,YACAC,a","file":"js/user-center.73c056fb.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./user-center.vue?vue&type=style&index=0&id=0583ecd4&scoped=true&lang=scss\"","<template>\n  <div\n    class=\"user-center\"\n    v-no-result:[noResultText]=\"noResult\"\n  >\n    <div class=\"back\" @click=\"back\">\n      <i class=\"icon-back\"></i>\n    </div>\n    <div class=\"switches-wrapper\">\n      <switches\n        :items=\"['我喜欢的', '最近播放']\"\n        v-model=\"currentIndex\"\n      ></switches>\n    </div>\n    <div\n      class=\"play-btn\"\n      v-if=\"currentList.length\"\n      @click=\"random\"\n    >\n      <i class=\"icon-play\"></i>\n      <span class=\"text\">随机播放全部</span>\n    </div>\n    <div class=\"list-wrapper\">\n      <scroll class=\"list-scroll\" v-if=\"currentIndex===0\">\n        <div class=\"list-inner\">\n          <song-list\n            :songs=\"favoriteList\"\n            @select=\"selectSong\"\n          >\n          </song-list>\n        </div>\n      </scroll>\n      <scroll class=\"list-scroll\" v-if=\"currentIndex===1\">\n        <div class=\"list-inner\">\n          <song-list\n            :songs=\"playHistory\"\n            @select=\"selectSong\"\n          >\n          </song-list>\n        </div>\n      </scroll>\n    </div>\n  </div>\n</template>\n\n<script>\n  import Switches from '@/components/base/switches/switches'\n  import Scroll from '@/components/wrap-scroll'\n  import SongList from '@/components/base/song-list/song-list'\n  import { mapState, mapActions } from 'vuex'\n\n  export default {\n    name: 'user-center',\n    components: {\n      Switches,\n      Scroll,\n      SongList\n    },\n    data() {\n      return {\n        currentIndex: 0\n      }\n    },\n    computed: {\n      noResult() {\n        return this.currentIndex === 0 ? !this.favoriteList.length : !this.playHistory.length\n      },\n      noResultText() {\n        return this.currentIndex === 0 ? '暂无收藏歌曲' : '你还没有听过歌曲'\n      },\n      currentList() {\n        return this.currentIndex === 0 ? this.favoriteList : this.playHistory\n      },\n      ...mapState([\n        'favoriteList',\n        'playHistory'\n      ])\n    },\n    methods: {\n      back() {\n        this.$router.back()\n      },\n      selectSong({ song }) {\n        this.addSong(song)\n      },\n      random() {\n        this.randomPlay(this.currentList)\n      },\n      ...mapActions([\n        'addSong',\n        'randomPlay'\n      ])\n    }\n  }\n</script>\n\n<style scoped lang=\"scss\">\n  .user-center {\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    z-index: 100;\n    width: 100%;\n    background: $color-background;\n    .back {\n      position: absolute;\n      top: 0;\n      left: 6px;\n      z-index: 50;\n      .icon-back {\n        display: block;\n        padding: 10px;\n        font-size: $font-size-large-x;\n        color: $color-theme;\n      }\n    }\n    .switches-wrapper {\n      margin: 10px 0 30px 0;\n    }\n    .play-btn {\n      box-sizing: border-box;\n      width: 135px;\n      padding: 7px 0;\n      margin: 0 auto;\n      text-align: center;\n      border: 1px solid $color-text-l;\n      color: $color-text-l;\n      border-radius: 100px;\n      font-size: 0;\n      .icon-play {\n        display: inline-block;\n        vertical-align: middle;\n        margin-right: 6px;\n        font-size: $font-size-medium-x;\n      }\n      .text {\n        display: inline-block;\n        vertical-align: middle;\n        font-size: $font-size-small;\n      }\n    }\n    .list-wrapper {\n      position: absolute;\n      top: 110px;\n      bottom: 0;\n      width: 100%;\n      .list-scroll {\n        height: 100%;\n        overflow: hidden;\n        .list-inner {\n          padding: 20px 30px;\n        }\n      }\n    }\n  }\n</style>\n","import { render } from \"./user-center.vue?vue&type=template&id=0583ecd4&scoped=true\"\nimport script from \"./user-center.vue?vue&type=script&lang=js\"\nexport * from \"./user-center.vue?vue&type=script&lang=js\"\n\nimport \"./user-center.vue?vue&type=style&index=0&id=0583ecd4&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-0583ecd4\"\n\nexport default script","import { h, mergeProps, withCtx, renderSlot, ref, computed, watch, nextTick } from 'vue'\nimport Scroll from '@/components/base/scroll/scroll'\nimport { useStore } from 'vuex'\n\nexport default {\n  name: 'wrap-scroll',\n  props: Scroll.props,\n  emits: Scroll.emits,\n  render(ctx) {\n    return h(Scroll, mergeProps({\n      ref: 'scrollRef'\n    }, ctx.$props, {\n      onScroll: (e) => {\n        ctx.$emit('scroll', e)\n      }\n    }), {\n      default: withCtx(() => {\n        return [renderSlot(ctx.$slots, 'default')]\n      })\n    })\n  },\n  setup() {\n    const scrollRef = ref(null)\n    const scroll = computed(() => {\n      return scrollRef.value.scroll\n    })\n\n    const store = useStore()\n    const playlist = computed(() => store.state.playlist)\n\n    watch(playlist, async () => {\n      await nextTick()\n      scroll.value.refresh()\n    })\n\n    return {\n      scrollRef,\n      scroll\n    }\n  }\n}\n"],"sourceRoot":""}